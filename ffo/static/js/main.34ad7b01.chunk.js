(this["webpackJsonpafo-frontend"]=this["webpackJsonpafo-frontend"]||[]).push([[0],{207:function(e,t,n){e.exports=n.p+"static/media/bgPattern.abbb91ac.svg"},219:function(e,t,n){e.exports=n(239)},224:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},235:function(e,t,n){},237:function(e,t,n){},239:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),c=n.n(o),i=(n(224),n(45)),l=n.n(i),s=n(73),u=n(32),m=(n(226),function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"loading-text-container"},r.a.createElement("div",null,"loading...")),r.a.createElement("div",{className:"app-logo-container"},r.a.createElement("img",{src:"MainLogo.svg",className:"app-logo-loading",alt:"ball-logo"})))}),p=(n(227),function(e){var t=e.children,n=e.green,a=e.onClick,o=e.primary,c=e.lg,i=e.link,l="button ";return l+=o?"primary-btn":"",l+=e.secondary?"secondary-btn":"",l+=n?"green-btn":"",l+=c?" lg-btn":" md-btn",r.a.createElement("a",{href:i,className:l,onClick:a},t)});p.default={link:""};var d=p,f=n(269),g=n(203),h=n(254),b=n(202),v=function(e){var t=e.value,n=e.setValue,a=e.primary;return r.a.createElement(b.a,{component:"fieldset"},r.a.createElement(g.a,{"aria-label":"footballing gender",className:"afo-radio",name:"gender",value:t,onChange:function(e){n(e.target.value)}},r.a.createElement(h.a,{value:"women",control:r.a.createElement(f.a,{color:a?"primary":"secondary"}),label:"Women's game"}),r.a.createElement(h.a,{value:"men",control:r.a.createElement(f.a,null),label:"Men's game"})))},E=n(264),y=n(265),k=n(266),I=n(205),j=n.n(I),O=n(94),N=n(137),T=n(65);function w(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length)return t.pop().split(";").shift()}var x=function e(){Object(T.a)(this,e)};x.getTeamsForLeague=function(e){return new Promise((function(t,n){return fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token")},body:JSON.stringify({query:"query { teamsInCompetition(competitionId: ".concat(e,") {")+"teamId\n                    standing\n                    competitionId\n                }}"})}).then((function(e){return e.json()})).then((function(e){console.log(e.data),t(e.data.teamsInCompetition)})).catch((function(e){n(e)}))}))},x.getTeamFromTeamId=function(e){return new Promise((function(t,n){return fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token")},body:JSON.stringify({query:"query { getTeam(filter: { teamId: ".concat(e," }) {")+"name \n                     logo\n                     _id\n                     ground {\n                        name\n                        capacity\n                        city\n                      }\n                }}"})}).then((function(e){return e.json()})).then((function(e){console.log(e.data.getTeam),t(e.data.getTeam)})).catch((function(e){n(e)}))}))};var S=m;n(211),n(256),n(260),n(259),n(255),n(257),n(258),n(231);var C=n(261),F=n(263),q=n(262),A=d,P=function(e){var t=e.TeamInfo,n=t.name;return r.a.createElement(C.a,{className:"team-card"},r.a.createElement(q.a,null,r.a.createElement("div",{className:"team-content"},r.a.createElement("img",{src:t.logo,alt:"".concat(n," logo")}))),r.a.createElement(F.a,null,r.a.createElement(A,{green:!0},n," Analysis")))},L=function(e){var t=e.competitionId,n=function(e,t){var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),r=Object(u.a)(n,2),o=r[0],c=r[1];return[o,function(t){try{var n=t instanceof Function?t(o):t;c(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}("teamsByCompetitionId",[]),o=Object(u.a)(n,2),c=o[0],i=o[1],m=Object(a.useState)([]),p=Object(u.a)(m,2),d=p[0],f=p[1];return Object(a.useEffect)((function(){Object(s.a)(l.a.mark((function e(){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=c[t])){e.next=5;break}f(n),e.next=9;break;case 5:return e.next=7,x.getTeamsForLeague(t);case 7:a=e.sent,Promise.all(a.map(function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getTeamFromTeamId(t.teamId);case 2:return(n=e.sent).teamId=t.teamId,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){f(e),i(Object(N.a)(Object(N.a)({},c),{},Object(O.a)({},t,e)))}));case 9:case"end":return e.stop()}}),e)})))()}),[]),d.length>0?r.a.createElement("div",{className:"team-cards"},d.map((function(e){return r.a.createElement(P,{key:e.teamId,TeamInfo:e})}))):r.a.createElement(S,null)},U=(n(232),function(e){var t=e.competitions,n=Object(a.useState)("men"),o=Object(u.a)(n,2),c=o[0],i=o[1],l=Object(a.useState)(null),s=Object(u.a)(l,2),m=s[0],p=s[1];return r.a.createElement("section",{className:"leagues"},r.a.createElement(v,{value:c,setValue:i}),"men"===c?t.filter((function(e){return!e.name.includes("WSL")&&(null===m||m===e.leagueId)})).sort((function(e,t){return e.tier>t.tier?1:-1})).map((function(e){return r.a.createElement(E.a,{key:e.leagueId,onChange:function(t,n){console.log(n),p(n?e.leagueId:null)},className:"team-select-acc",TransitionProps:{unmountOnExit:!0}},r.a.createElement(y.a,{expandIcon:r.a.createElement(j.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},e.name),r.a.createElement(k.a,null,r.a.createElement(L,{competitionId:e.leagueId})))})):t.filter((function(e){return e.name.includes("WSL")})).sort((function(e,t){return e.tier>t.tier?1:-1})).map((function(e){return r.a.createElement("div",{key:e.leagueId,className:"league"},r.a.createElement("div",{className:"league-name"},e.name),r.a.createElement("div",{className:"league-logo"},r.a.createElement(L,{competitionId:e.leagueId})))})))}),B=function e(){Object(T.a)(this,e)};B.getCompetitionsForCountry=function(e,t){fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token")},body:JSON.stringify({query:'query { competitions(filter: { AND: [{ isCurrent: true }, { country: "'.concat(e,'" }, { type: LEAGUE }]})')+"{ name leagueId isCurrent tier logo }}"})}).then((function(e){return e.json()})).then((function(e){console.log(e),t(e)}))};var J=function e(){Object(T.a)(this,e)};J.getUsersFromId=function(e){return new Promise((function(t,n){return fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token")},body:JSON.stringify({query:"query getUsers {\n                    users(filter: { twitterId: ".concat(e," }) {\n                      screenName\n                      name\n                      location\n                      authLevel\n                      userId\n                    }\n                  }")})}).then((function(e){return e.json()})).then((function(e){console.log(e.data.users),t(e.data.users)})).catch((function(e){n(e)}))}))},J.getUserInfo=function(){return new Promise((function(e,t){return fetch("https://afcmbackend.herokuapp.com/graphql".replace("graphql","api/user"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+w("token")}}).then((function(e){return e.json()})).then((function(t){console.log(t.user),e(t.user)})).catch((function(e){t(e)}))}))},J.createUser=function(e){var t=e.name,n=e.screenName,a=e.location,r=e.userId;return new Promise((function(e,o){return fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+w("token")},body:JSON.stringify({query:"mutation addUser { \n                    createUser(record:{ twitterId: ".concat(r,', screenName: "').concat(n,'", name: "').concat(t,'", location: "').concat(a,'", authLevel: PLAYER}) {\n                    recordId,\n                    record {\n                      name,\n                      userId\n                    },\n                    error {\n                      __typename\n                    }\n                  }\n                }')})}).then((function(e){return e.json()})).then((function(t){console.log(t.data.getTeam),e(t.data.getTeam)})).catch((function(e){o(e)}))}))};n(235);var z=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)([]),i=Object(u.a)(c,2),p=i[0],f=i[1],g=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,J.getUserInfo();case 3:if(!(t=e.sent)){e.next=13;break}return e.next=7,J.getUsersFromId(parseInt(t.userId));case 7:if(0!==e.sent.length){e.next=13;break}return e.next=11,J.createUser(t);case 11:(n=e.sent).error.length>0?console.error("unable to create user: ",n.error):console.info("new user created ok: ",n);case 13:return e.next=15,B.getCompetitionsForCountry("England");case 15:(a=e.sent)&&a.data?(f(a.data.competitions),o(!1)):console.error("unable to retrieve competitions",a);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"app-start"},!n&&0===p.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"heading"},r.a.createElement("div",{className:"text-logo-left"},r.a.createElement("img",{src:"LogoFFOText.svg",className:"text-logo",alt:"logo"})),r.a.createElement("div",{className:"text"},"Welcome to Fantasy Football Owner ",document.cookie.userName),r.a.createElement("div",{className:"text-logo-right"},r.a.createElement("img",{src:"LogoFFOText.svg",className:"text-logo",alt:"logo"}))),r.a.createElement("section",{className:"app-start-action"},r.a.createElement("span",null,"This is a Fantasy Football game based on real events/data"),r.a.createElement("span",null,"Manager transitions, player crises, financial ruin?! This is fantasy football like no other."),r.a.createElement("span",null,"Legal notice: this is a non-comercial/amateur game. Players/users do not pay for any service."),r.a.createElement(d,{green:!0,lg:!0,onClick:g},"Start new game"))),n&&r.a.createElement(m,null),!n&&p.length>0&&r.a.createElement(U,{competitions:p}))},W=n(267),M=(0,n(238).createMuiTheme)({palette:{primary:{main:"#69bb31"},secondary:{main:"#8f214d"}}}),_=n(207),G=n.n(_);n(237);var V=function(){return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"background"},r.a.createElement("img",{alt:"background pattern",src:G.a})),r.a.createElement(W.a,{theme:M},r.a.createElement(z,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[219,1,2]]]);
//# sourceMappingURL=main.34ad7b01.chunk.js.map