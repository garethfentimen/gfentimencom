(this["webpackJsonpafo-frontend"]=this["webpackJsonpafo-frontend"]||[]).push([[0],{207:function(e,t,n){e.exports=n.p+"static/media/bgPattern.abbb91ac.svg"},219:function(e,t,n){e.exports=n(239)},224:function(e,t,n){},225:function(e,t,n){},226:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},235:function(e,t,n){},237:function(e,t,n){},239:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),c=n.n(r),i=(n(224),n(32)),l=(n(225),function(){return o.a.createElement("div",{className:"loading"},o.a.createElement("div",{className:"loading-text-container"},o.a.createElement("div",null,"loading...")),o.a.createElement("div",{className:"app-logo-container"},o.a.createElement("img",{src:"MainLogo.svg",className:"app-logo-loading",alt:"ball-logo"})))}),s=(n(226),function(e){var t=e.children,n=e.green,a=e.onClick,r=e.primary,c=e.lg,i=e.link,l="button ";return l+=r?"primary-btn":"",l+=e.secondary?"secondary-btn":"",l+=n?"green-btn":"",l+=c?" lg-btn":" md-btn",o.a.createElement("a",{href:i,className:l,onClick:a},t)});s.default={link:""};var u=s,m=n(269),p=n(203),d=n(254),f=n(202),g=function(e){var t=e.value,n=e.setValue,a=e.primary;return o.a.createElement(f.a,{component:"fieldset"},o.a.createElement(p.a,{"aria-label":"footballing gender",className:"afo-radio",name:"gender",value:t,onChange:function(e){n(e.target.value)}},o.a.createElement(d.a,{value:"women",control:o.a.createElement(m.a,{color:a?"primary":"secondary"}),label:"Women's game"}),o.a.createElement(d.a,{value:"men",control:o.a.createElement(m.a,null),label:"Men's game"})))},h=n(264),b=n(265),E=n(266),v=n(205),y=n.n(v),j=n(93),O=n(136),k=n(73),N=n.n(k),I=n(137),T=n(64);function S(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length)return t.pop().split(";").shift()}var w=function e(){Object(T.a)(this,e)};w.getTeamsForLeague=function(e){return new Promise((function(t,n){return fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+S("token")},body:JSON.stringify({query:"query { teamsInCompetition(competitionId: ".concat(e,") {")+"teamId\n                    standing\n                    competitionId\n                }}"})}).then((function(e){return e.json()})).then((function(e){console.log(e.data),t(e.data.teamsInCompetition)})).catch((function(e){n(e)}))}))},w.getTeamFromTeamId=function(e){return new Promise((function(t,n){return fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+S("token")},body:JSON.stringify({query:"query { getTeam(filter: { teamId: ".concat(e," }) {")+"name \n                     logo\n                     _id\n                     ground {\n                        name\n                        capacity\n                        city\n                      }\n                }}"})}).then((function(e){return e.json()})).then((function(e){console.log(e.data.getTeam),t(e.data.getTeam)})).catch((function(e){n(e)}))}))};var C=l;n(211),n(256),n(260),n(259),n(255),n(257),n(258),n(231);var x=n(261),F=n(263),q=n(262),A=u,P=function(e){var t=e.TeamInfo,n=t.name;return o.a.createElement(x.a,{className:"team-card"},o.a.createElement(q.a,null,o.a.createElement("div",{className:"team-content"},o.a.createElement("img",{src:t.logo,alt:"".concat(n," logo")}))),o.a.createElement(F.a,null,o.a.createElement(A,{green:!0},n," Analysis")))},L=function(e){var t=e.competitionId,n=function(e,t){var n=Object(a.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(a){return console.log(a),t}})),o=Object(i.a)(n,2),r=o[0],c=o[1];return[r,function(t){try{var n=t instanceof Function?t(r):t;c(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(a){console.log(a)}}]}("teamsByCompetitionId",[]),r=Object(i.a)(n,2),c=r[0],l=r[1],s=Object(a.useState)([]),u=Object(i.a)(s,2),m=u[0],p=u[1];return Object(a.useEffect)((function(){Object(I.a)(N.a.mark((function e(){var n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=c[t])){e.next=5;break}p(n),e.next=9;break;case 5:return e.next=7,w.getTeamsForLeague(t);case 7:a=e.sent,Promise.all(a.map(function(){var e=Object(I.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getTeamFromTeamId(t.teamId);case 2:return(n=e.sent).teamId=t.teamId,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(e){p(e),l(Object(O.a)(Object(O.a)({},c),{},Object(j.a)({},t,e)))}));case 9:case"end":return e.stop()}}),e)})))()}),[]),m.length>0?o.a.createElement("div",{className:"team-cards"},m.map((function(e){return o.a.createElement(P,{key:e.teamId,TeamInfo:e})}))):o.a.createElement(C,null)},B=(n(232),function(e){var t=e.competitions,n=Object(a.useState)("men"),r=Object(i.a)(n,2),c=r[0],l=r[1],s=Object(a.useState)(null),u=Object(i.a)(s,2),m=u[0],p=u[1];return o.a.createElement("section",{className:"leagues"},o.a.createElement(g,{value:c,setValue:l}),"men"===c?t.filter((function(e){return!e.name.includes("WSL")&&(null===m||m===e.leagueId)})).sort((function(e,t){return e.tier>t.tier?1:-1})).map((function(e){return o.a.createElement(h.a,{key:e.leagueId,onChange:function(t,n){console.log(n),p(n?e.leagueId:null)},className:"team-select-acc",TransitionProps:{unmountOnExit:!0}},o.a.createElement(b.a,{expandIcon:o.a.createElement(y.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},e.name),o.a.createElement(E.a,null,o.a.createElement(L,{competitionId:e.leagueId})))})):t.filter((function(e){return e.name.includes("WSL")})).sort((function(e,t){return e.tier>t.tier?1:-1})).map((function(e){return o.a.createElement("div",{key:e.leagueId,className:"league"},o.a.createElement("div",{className:"league-name"},e.name),o.a.createElement("div",{className:"league-logo"},o.a.createElement(L,{competitionId:e.leagueId})))})))}),J=function e(){Object(T.a)(this,e)};J.getCompetitionsForCountry=function(e,t){fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+S("token")},body:JSON.stringify({query:'query { competitions(filter: { AND: [{ isCurrent: true }, { country: "'.concat(e,'" }, { type: LEAGUE }]})')+"{ name leagueId isCurrent tier logo }}"})}).then((function(e){return e.json()})).then((function(e){console.log(e),t(e)}))};var U=function e(){Object(T.a)(this,e)};U.getUserFromName=function(e){return new Promise((function(t,n){return fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+S("token")},body:JSON.stringify({query:"query getUsers {\n                    users(filter: { name: ".concat(e," }) {\n                      screenName,\n                      name,\n                      location,\n                      authLevel\n                      userId\n                    }\n                  }")})}).then((function(e){return e.json()})).then((function(e){console.log(e.data),t(e.data.users)})).catch((function(e){n(e)}))}))},U.getUserInfo=function(){return new Promise((function(e,t){return fetch("https://afcmbackend.herokuapp.com/graphql".replace("graphql","api/user"),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer "+S("token")}}).then((function(e){return e.json()})).then((function(t){console.log(t.user),e(t.user)})).catch((function(e){t(e)}))}))},U.createUser=function(e){var t=e.name,n=e.screen_name,a=e.location;return new Promise((function(e,o){return fetch("https://afcmbackend.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+S("token")},body:JSON.stringify({query:"mutation addUser { \n                    createUser(record:{ screenName: ".concat(n,", name: ").concat(t,", location: ").concat(a,", authLevel: PLAYER}) {\n                    recordId,\n                    record {\n                      name,\n                      userId\n                    },\n                    error {\n                      __typename\n                    }\n                  }\n                }")})}).then((function(e){return e.json()})).then((function(t){console.log(t.data.getTeam),e(t.data.getTeam)})).catch((function(e){o(e)}))}))};n(235);var z=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(i.a)(c,2),m=s[0],p=s[1],d=Object(a.useState)(null),f=Object(i.a)(d,2),g=f[0],h=f[1];return o.a.createElement("div",{className:"app-start"},!n&&0===m.length&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"heading"},o.a.createElement("div",{className:"text-logo-left"},o.a.createElement("img",{src:"LogoFFOText.svg",className:"text-logo",alt:"logo"})),o.a.createElement("div",{className:"text"},"Welcome to Fantasy Football Owner ",document.cookie.userName),o.a.createElement("div",{className:"text-logo-right"},o.a.createElement("img",{src:"LogoFFOText.svg",className:"text-logo",alt:"logo"}))),o.a.createElement("section",{className:"app-start-action"},o.a.createElement("span",null,"This is a Fantasy Football game based on real events/data"),o.a.createElement("span",null,"Manager transitions, player crises, financial ruin?! This is fantasy football like no other."),o.a.createElement("span",null,"Legal notice: this is a non-comercial/amateur game. Players/users do not pay for any service."),o.a.createElement(u,{green:!0,lg:!0,onClick:function(){r(!0),U.getUserInfo().then((function(e){h(e)})),J.getCompetitionsForCountry("England",(function(e){e&&e.data&&p(e.data.competitions),r(!1)}))}},"Start new game"))),(n||!g)&&o.a.createElement(l,null),!n&&m.length>0&&g&&o.a.createElement(B,{competitions:m}))},W=n(267),M=(0,n(238).createMuiTheme)({palette:{primary:{main:"#69bb31"},secondary:{main:"#8f214d"}}}),_=n(207),G=n.n(_);n(237);var V=function(){return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"background"},o.a.createElement("img",{alt:"background pattern",src:G.a})),o.a.createElement(W.a,{theme:M},o.a.createElement(z,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[219,1,2]]]);
//# sourceMappingURL=main.830d2445.chunk.js.map